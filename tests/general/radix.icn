#  radix.icn -- test radix conversion in linker vs runtime

procedure main()
   try("2r101111", 2r101111)
   try("3r201", 3r201)
   try("4r11213", 4r11213)
   try("5r1234", 5r1234)
   try("6r1253", 6r1253)
   try("7r1253", 7r1253)
   try("8r1257", 8r1257)
   try("9r1257", 9r1257)
   try("10r1257", 10r1257)
   try("11r1257", 11r1257)
   try("12r1257", 12r1257)
   try("13r1257", 13r1257)
   try("19r1257", 19r1257)
   try("23r1257", 23r1257)
   try("29r1257", 29r1257)
   try("31r1257", 31r1257)
   try("36r1257", 36r1257)
   try("8r76054132752", 8r76054132752)
   try("9r76054132752", 9r76054132752)
   try("10r76054132752", 10r76054132752)
   try("11r76054132752", 11r76054132752)
   try("12r76054132752", 12r76054132752)
   try("13r76054132752", 13r76054132752)
   try("19r76054132752", 19r76054132752)
   try("23r76054132752", 23r76054132752)
   try("29r76054132752", 29r76054132752)
   try("31r76054132752", 31r76054132752)
   try("36r76054132752", 36r76054132752)
   try("2r01001010100010101010", 2r01001010100010101010)
   try("2r111111111111111111111111111111111111111111111111111111111111111",
      2r111111111111111111111111111111111111111111111111111111111111111)
   try("2r1111111111111111111111111111111111111111111111111111111111111111",
      2r1111111111111111111111111111111111111111111111111111111111111111)
   try("2r11111111111111111111111111111111111111111111111111111111111111111",
      2r11111111111111111111111111111111111111111111111111111111111111111)
   try("8r01234567", 8r01234567)
   try("8r377777777777777777777", 8r377777777777777777777)
   try("16r0123456789ABCDEF", 16r0123456789ABCDEF)
   try("16r7fffffffffffffff", 16r7fffffffffffffff)
   try("16rffffffffffffffff", 16rffffffffffffffff)
   try("16r10000000000000000", 16r10000000000000000)
   try("16r123456789ABCDEF01234", 16r123456789ABCDEF01234) 
   try("36rICON", 36rICON)
   try("36rIcon", 36rIcon)
   try("36r123456789AEIOU", 36r123456789AEIOU)
   try("36rZYXWVYTSRQPONMLKJIHGFEDCBA9876543210", 
      36rZYXWVYTSRQPONMLKJIHGFEDCBA9876543210)
end

procedure try(s, i)
	local j
	j := integer(s)
	if /j then
		write(image(s), ": failed to convert")
	else if i == j then
		write(image(s), ": ", j)
	else
		write(image(s), ": got ", j, ", but expected ", i)
end
